<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="canvas" height="500" width="500" style="border: 1px solid pink"></canvas>
<script type="x-webgl/x-vertex-shader" id="vertexShader">
attribute vec2 aVertexPosition;
void main() {
gl_Position = vec4(aVertexPosition, 0.0, 1.0);
}

</script>
<script type="x-webgl/x-fragment-shader" id="fragmentShader">
uniform vec4 uColor;
void main() {
gl_FragColor = uColor;
}

</script>
<script>
    window.onload=function () {
//        var buffer = new ArrayBuffer(20);
//        var view = new DataView(buffer);
//        view.setUint16(0, 25);
//        view.setUint16(2, 50);
//        var value = view.getUint16(0);
//        var int8s = new Int8Array([10, 20, 30, 40, 50]);
//        for (var i = 0, len = int8s.length; i < len; i++) {
//            console.log("Value at position " + i + " is " + int8s[i]);
//        }
//        var uint16s = new Uint16Array(10),
//                sub = uint16s.subarray(2, 5);
//        var canvas = document.getElementById("canvas");
//        var gl = canvas.getContext("experimental-webgl");
//        //    gl.viewport(0, 0, canvas.width/2, canvas.height/2);
//        gl.clearColor(0, 0, 0, 1); //black
//        gl.clear(gl.COLOR_BUFFER_BIT);
//        var buffer = gl.createBuffer();
//        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
//        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0.5, 1]), gl.STATIC_DRAW);
//        var errorCode = gl.getError();
//        while (errorCode) {
//            console.log("Error occurred: " + errorCode);
//            errorCode = gl.getError();
//        }
//        var vertexGlsl = document.getElementById("vertexShader").text,
//                fragmentGlsl = document.getElementById("fragmentShader").text;
//        var vertexShader = gl.createShader(gl.VERTEX_SHADER);
//        gl.shaderSource(vertexShader, vertexGlsl);
//        gl.compileShader(vertexShader);
//        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
//        gl.shaderSource(fragmentShader, fragmentGlsl);
//        gl.compileShader(fragmentShader);
//        var program = gl.createProgram();
//        gl.attachShader(program, vertexShader);
//        gl.attachShader(program, fragmentShader);
//        gl.linkProgram(program);
//        gl.useProgram(program);
//        var uColor = gl.getUniformLocation(program, "uColor");
//        gl.uniform4fv(uColor, [0, 0, 0, 1]);
//        var aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
//        gl.enableVertexAttribArray(aVertexPosition);
//        gl.vertexAttribPointer(aVertexPosition, itemSize, gl.FLOAT, false, 0, 0);
//        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)){
//            alert(gl.getShaderInfoLog(vertexShader));
//        }
                var canvas = document.getElementById("canvas");
        var gl = canvas.getContext("experimental-webgl");
        var vertices = new Float32Array([ 0, 1, 1, -1, -1, -1 ]),
                buffer = gl.createBuffer(),
                vertexSetSize = 2,
                vertexSetCount = vertices.length/vertexSetSize,
                uColor, aVertexPosition;
//把数据放到缓冲区
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
//为片段着色器传入颜色值
        uColor = gl.getUniformLocation(program, "uColor");
        gl.uniform4fv(uColor, [ 0, 0, 0, 1 ]);
//为着色器传入顶点信息
        aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
        gl.enableVertexAttribArray(aVertexPosition);
        gl.vertexAttribPointer(aVertexPosition, vertexSetSize, gl.FLOAT, false, 0, 0);
//绘制三角形
        gl.drawArrays(gl.TRIANGLES, 0, vertexSetCount);
    }
</script>
</body>
</html>